<base-dialog [tabs]="tabs" [activeTab]="activeTab()" (activeTabChange)="activeTab.set($event)">
    <div dialog-header>
        <div class="title">Options</div>
    </div>
    <div dialog-body>
        <div class="tab-content" *ngIf="activeTab() === 'General'">
            <div class="option-row">
                <label for="sheetsColor">Sheets color:</label>
                <select id="sheetsColor" class="bt-select" [value]="optionsService.options().sheetsColor"
                    (change)="onSheetsColorChange($event)">
                    <option value="normal">Normal (default)</option>
                    <option value="night">Night mode</option>
                </select>
            </div>
            <div class="option-row">
                <label for="pickerStyle">Picker style:</label>
                <select id="pickerStyle" class="bt-select" [value]="optionsService.options().pickerStyle"
                    (change)="onPickerStyleChange($event)">
                    <option value="default">Automatic (default)</option>
                    <option value="radial">Always Dial</option>
                    <option value="linear">Always Linear</option>
                </select>
            </div>
            <div class="option-col">
                <div class="option-row">
                    <label for="quickActions">Quick actions:</label>
                    <select id="quickActions" class="bt-select" [value]="optionsService.options().quickActions"
                        (change)="onQuickActionsChange($event)">
                        <option value="enabled">Enabled</option>
                        <option value="disabled">Disabled (default)</option>
                    </select>
                </div>
                <div class="description">
                    <p>Quick actions let you trigger the picker's default action with a single tap or click, without opening
                        the picker.</p>
                    <p>Examples: in the Critical Table, clicking an ammo slot reduces ammo by 1; clicking other critical
                        slots applies a critical hit.</p>
                </div>
            </div>
            <hr>
            <div class="option-col">
                <label for="userUuid">User Identifier:</label>
                <div class="option-row">
                    <input id="userUuid" class="bt-input" [class.error]="!!userUuidError" type="text" [value]="userUuid"
                        (input)="onUserUuidInput($event)" (focus)="selectAll($event)"
                        (keydown)="onUserUuidKeydown($event)" />
                    <button class="bt-button" (click)="onSetUuid()">APPLY</button>
                </div>
                <div *ngIf="userUuidError" class="error-msg">{{ userUuidError }}</div>
                <div class="description">
                    <p>The User Identifier is used for cloud saving and is autogenerated the first time the application is
                        started.</p>
                    <p>By setting the same ID on multiple devices, you can share your saved forces across them.</p>
                </div>
            </div>
        </div>
        <!-- Advanced options -->
        <div class="tab-content" *ngIf="activeTab() === 'Advanced'">
            <div class="option-col">
                <div class="option-row">
                    <span>Record sheets stored: <strong>{{ formatBytes(sheetCacheSize()) }}</strong></span>
                    <button class="bt-button" (click)="onPurgeCache()">PURGE</button>
                </div>
                <div class="description">
                    <p>MekBay caches record sheets locally to speed up loading times and for offline use.</p>
                    <p>Purging the cache will remove all stored sheets. They will be re-downloaded as needed.</p>
                </div>
            </div>
        </div>
    </div>
    <div dialog-footer>
        <button class="modal-btn bt-button" (click)="onClose()">DISMISS</button>
    </div>
</base-dialog>